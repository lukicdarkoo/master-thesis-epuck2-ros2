\chapter{Results and Interpretation}
\label{chap:results}
\shorttitle{\nameref{chap:results}}

\section{Comparison of Physical and Simulated E-puck2}

\subsection{ROS2 Interface for Physical vs. Simulated E-puck2}
\subsection{Camera Performance Comparison}
This analysis aims to determine a suitable way to transport the images from Raspberry Pi Zero and identify bottlenecks.
In the Table \ref{tab:results:camera_perf}, performances are measured in \ac{fps} and the measurements are given for different camera implementations.

\begin{table}[H]
    \begin{adjustwidth}{-1.5in}{-1.5in} 
    \centering
    \begin{tabular}{|c|c|c|c|}
        \hline
         & 32x24 [\ac{fps} ($ \sigma $)] & 160x120 [\ac{fps} ($ \sigma $)] & 640x480 [\ac{fps} ($ \sigma $)] \\
         \hline
         RAW over Wifi & 13.95 (0.009s) & 10.08 (0.013s) & 1.62 (0.096s) \\
         \hline
         RAW on-board & X & X & 3.80 (0.064s) \\
        \hline
        JPEG over Wifi & X & X & 2.97 (0.105s) \\
        \hline
        JPEG over Wifi with white-noise & X & X & 0.95 (0.998s) \\
        \hline
        JPEG on-board & X & X & 2.10 (0.016s) \\
        \hline
        RAW on-board without YUV42RGB & X & X & 5.04 (0.037s) \\
        \hline
        Theora over Wifi & X & X & 1.25 (0.054s) \\
        \hline
        Theora on-board & X & X & 1.03 (0.026s) \\
        \hline
    \end{tabular}
    \end{adjustwidth}
    
    \caption{\ac{fps} measurements in different configurations within \ac{ros2} environment}
    \label{tab:results:camera_perf}
\end{table}

Please note that the experiments are done under the following conditions:
\begin{itemize}
    \item Package \texttt{v4l2\_camera} is used to read and transport images. The package works as following \begin{itemize}
        \item the images are read directly from memory using \texttt{mmap()} in YUV422\_YUY2 format (native camera format),
        \item the images are converted \ac{rgb} using \texttt{cv\_bridge} package and
        \item the images are transported using \texttt{image\_transport}, \texttt{image\_transport\_plugins} (equipped with \texttt{compressed\_image\_transport} and \texttt{theora\_image\_transport}) with default configuration,
        \item the package is alternated to accommodate image resize for this experiment and the image resizing is done just before YUV422\_YUY2 to \ac{rgb} conversion and
        \item the package is implemented in C++ with attention to memory management (the image is cloned only when necessary).
    \end{itemize}
    \item Camera is configured to 15 \ac{fps}.
    \item \ac{fps} measurements are done using \texttt{ros2 topic hz}.
    \item The Wifi network performance measurements are performed using \texttt{iperf3} and the following results acquired: \begin{itemize}
        \item 16.4 Mbits/sec for transfer from PC to Raspberry Pi Zero and
        \item 13.8 Mbits/sec for transfer from Raspberry Pi Zero to PC.
    \end{itemize}
    \item White noise is simulated by putting finger on the camera. The assumption is that the low light condition produces a lot of white noise. 
\end{itemize}

Measured data transfer between Raspberry Pi Zero and PC during the transfer of raw images is 12.8Mb/s, which is quite close speed measured using with \texttt{iperf3}.
Since every image is sent in \ac{rgb} format that means 7Mb per image ($ 8 \times \frac{ 3 \times 640 \times 480 }{1024 \times 1024}$), or at 1.62 \ac{fps} it is 11.4Mb/s.
Therefore, by sending raw images, we most probably encounter limitations of the Wifi network.

\subsection{Performance Comparison in Mapping}
\subsection{Performance Comparison in Navigation}

\section{\ac{ros2} Interface for E-puck2 vs Khepera IV}
\subsection{Performance Comparison in Mapping}
\subsection{Performance Comparison in Navigation}

\section{Benefits of Generalized \ac{ros2} Interface for Webots}
\subsection{Simplification of E-puck2 Driver}
\subsection{Khepera IV Driver Analysis}
\subsection{Going Beyond Khepera IV and E-puck2}
\subsubsection{TurtleBot3 Burger}
\subsubsection{TIAGo}
